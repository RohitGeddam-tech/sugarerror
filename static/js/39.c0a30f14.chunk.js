(this["webpackJsonpsugarlogger-frontend"]=this["webpackJsonpsugarlogger-frontend"]||[]).push([[39],{143:function(e,t,a){"use strict";var n=a(9),s=a(0),r=a.n(s),l=a(2);t.a=function(e){var t=e.type,a=e.placeholder,c=e.value,o=e.name,u=e.onChange,i=e.onBlur,d=e.error,p=e.disabled,m=void 0!==p&&p,f=e.icon,v=e.className,b=void 0===v?"":v,O=e.hasGrayBack,h=void 0!==O&&O,g=e.showPass,E=e.maxLength,j=e.ref,y=Object(s.useState)(!1),N=Object(n.a)(y,2),k=N[0],C=N[1],x=d?"has-error":"";b+=" form-control ";var S=Object(s.useRef)(null);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"input-group text-input ".concat(x," ").concat(h?"background-gray":"")},r.a.createElement("input",{type:(g?k?"text":"password":t)||"text",className:b,name:o,value:c,onChange:u,autoComplete:"off",ref:j||S,disabled:m,onBlur:i,maxLength:E}),r.a.createElement("label",{className:"input-placeholder"},a),f?r.a.createElement("span",{className:"input-icon"},f):r.a.createElement(r.a.Fragment,null),g?r.a.createElement("span",{className:"input-icon cursor-pointer",onClick:function(){return C(!k)}},k?l.ab:l.bb):r.a.createElement(r.a.Fragment,null),d?r.a.createElement("p",{className:"assistive-text error-text"},d):r.a.createElement("p",{className:"assistive-text"})))}},144:function(e,t,a){"use strict";var n=a(0),s=a.n(n),r=a(156);t.a=function(e){var t=e.className,a=void 0===t?"":t,l=e.options,c=void 0===l?[]:l,o=e.value,u=e.onChange,i=e.placeholder,d=e.error,p=e.hasGrayBack,m=void 0!==p&&p,f=e.isMulti,v=void 0!==f&&f,b=(e.hideSelectedOptions,e.isClearable),O=void 0===b||b,h=e.disabled,g=e.isLoading,E=e.hidePlaceholder,j=e.defaultValue,y=e.isSearchable,N=void 0!==y&&y,k="input-group select-control-input ".concat(d?"has-error":""," ").concat(m?"background-gray":""," ").concat(o&&o.value?"has-value":""," ").concat(E?"hide-placeholder":""," ").concat(h?"cursor-notAllowed":"");a+=" select-input ";var C=Object(n.useRef)(null);return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:k,ref:C},s.a.createElement(r.a,{value:o,onChange:u,options:c,className:a,classNamePrefix:"select-input",placeholder:s.a.createElement("div",null,""),onFocus:function(){return C.current.classList.add("select-focused")},onBlur:function(){return C.current.classList.remove("select-focused")},isClearable:O,isMulti:v,removeSelected:!1,defaultValue:j,isDisabled:h,isLoading:g,isSearchable:N}),s.a.createElement("label",{className:"select-placeholder"},i)),d?s.a.createElement("p",{className:"assistive-text error-text"},d):s.a.createElement("p",{className:"assistive-text"}))}},147:function(e,t,a){"use strict";var n=a(0),s=a.n(n),r=a(158);a(157);t.a=function(e){var t=e.message,a=e.type,l=e.callback,c=Object(n.useCallback)((function(e){switch(e){case"success":r.b.success(t,{position:r.b.POSITION.BOTTOM_RIGHT}),setTimeout((function(){l&&l()}),1500);break;case"error":r.b.error(t,{position:r.b.POSITION.BOTTOM_RIGHT});break;case"info":r.b.info(t,{position:r.b.POSITION.BOTTOM_RIGHT});break;case"warn":r.b.warn(t,{position:r.b.POSITION.BOTTOM_RIGHT})}}),[l,t]);return Object(n.useEffect)((function(){t&&a&&c(a)}),[t,c,a]),s.a.createElement("div",null,s.a.createElement(r.a,null))}},1521:function(e,t,a){"use strict";a.r(t);var n=a(14),s=a.n(n),r=a(6),l=a(18),c=a(13),o=a(9),u=a(0),i=a.n(u),d=a(4),p=a(10),m=a(198),f=a(144),v=a(143),b=a(147),O=a(17),h=a(22),g=a(207),E={name:"",gender:null,cost:"",tests:[]};t.default=function(e){var t=localStorage.getItem("loginAs"),a=Object(u.useContext)(O.a).profile,n=Object(u.useState)(Object(c.a)({},E)),j=Object(o.a)(n,2),y=j[0],N=j[1],k=Object(u.useState)({}),C=Object(o.a)(k,2),x=C[0],S=C[1],B=Object(u.useState)({show:!1,message:"",type:""}),R=Object(o.a)(B,2),I=R[0],T=R[1],L=Object(u.useState)(!1),w=Object(o.a)(L,2),A=w[0],M=w[1],P=Object(u.useState)([]),V=Object(o.a)(P,2),F=V[0],D=V[1],q=Object(u.useState)(!1),G=Object(o.a)(q,2),_=G[0],H=G[1],U=Object(d.h)().state.branchId;Object(u.useEffect)((function(){if(e.location.state&&e.location.state.packageData){var t=Object(c.a)({},e.location.state.packageData);t.tests=t.tests.map((function(e){return{label:e.name,value:e.uuid}})),t.gender=g.b.find((function(e){return e.value===t.gender})),N(Object(c.a)({},t)),H(!0)}}),[]),Object(u.useEffect)((function(){var e;(null===y||void 0===y||null===(e=y.gender)||void 0===e?void 0:e.value)&&(J(),N((function(e){return Object(c.a)({},e)})))}),[y.gender]);var J=Object(u.useCallback)(function(){var e=Object(l.a)(s.a.mark((function e(n){var l,c,o,u,i,d,p,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=null,"lab-admin"===t?c="/lab/".concat(U,"/test_master"):"lab"===t&&(null===a||void 0===a||null===(l=a.selectedRole)||void 0===l?void 0:l.uuid)&&(c="/lab/".concat(null===(o=a.selectedRole)||void 0===o?void 0:o.uuid,"/test_master")),!c){e.next=15;break}return e.next=5,Object(h.fetchRequest)({url:"".concat(c,"?").concat(n?"search=".concat(n):"").concat((null===(u=y.gender)||void 0===u?void 0:u.value)?"&gender=".concat(y.gender.value):""),method:"GET",isAuth:!0});case 5:if(!(i=e.sent)||200!==i.status){e.next=14;break}return e.next=9,i.json();case 9:return d=e.sent,p=d.data,m=p&&p.length&&Object(r.a)(p).filter((function(e){return"test"===e.type||"panel"===e.type})).map((function(e){return{label:e.name,value:e.uuid}})),D(m),e.abrupt("return",m);case 14:return e.abrupt("return");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,U,a,y]),W=function(e,t){var a=Object(c.a)({},y);"gender"===t&&e!==y.gender&&(a.tests=[]),a[t]=e,N(Object(c.a)({},a))},z=function(){var n=Object(l.a)(s.a.mark((function n(l){var o,u,i,d,p;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(M(!0),S({}),T({show:!1,message:"",type:""}),l.preventDefault(),o={name:y.name,cost:y.cost,gender:y.gender&&y.gender.value,tests:Object(r.a)(y.tests).map((function(e){return e.value}))},u=null,"lab-admin"!==t&&"super-admin"!==t&&"assistant-admin"!==t||!U?"lab"===t&&(u="/lab/".concat(a.selectedRole.uuid,"/test_packages").concat(_?"/".concat(y.uuid):"")):u="/lab/".concat(U,"/test_packages").concat(_?"/".concat(y.uuid):""),!u){n.next=25;break}return n.next=10,Object(h.fetchRequest)({url:u,method:_?"PUT":"POST",isAuth:!0,body:o});case 10:if((i=n.sent)&&M(!1),!i||200!==i.status){n.next=19;break}return n.next=15,i.json();case 15:(d=n.sent).success&&(d.message&&T({show:!0,message:d.message,type:"success"}),setTimeout((function(){return e.history.goBack()}),2e3)),n.next=24;break;case 19:return n.next=21,i.json();case 21:p=n.sent,S(Object(c.a)({},p.errors)),422!==i.status&&!Object.keys(p.error?p.error:{}).length&&p.message&&T({show:!0,message:p.message,type:"error"});case 24:return n.abrupt("return");case 25:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),K=y.name,Q=y.gender,X=y.cost,Y=y.tests;return i.a.createElement("div",{className:"form-content-with-space"},i.a.createElement(b.a,I),i.a.createElement("div",{className:"paper"},i.a.createElement("label",{className:"paper-label semi-bold mb-3"},"Please enter the required details"),i.a.createElement("div",{className:"row mb-4"},i.a.createElement("div",{className:"form-group col-md-5 col-12"},i.a.createElement(v.a,{placeholder:"Package Name*",value:K||"",onChange:function(e){return W(e.target.value,"name")},error:x&&x.name})),i.a.createElement("div",{className:"form-group col-md-4 col-12"},i.a.createElement(f.a,{placeholder:"Gender*",options:g.b,value:Q,onChange:function(e){return W(e,"gender")},error:x&&x.gender})),i.a.createElement("div",{className:"form-group col-md-3 col-12"},i.a.createElement(v.a,{placeholder:"Cost (in \u20b9)*",value:X||"",onChange:function(e){return W(e.target.value,"cost")},error:x&&x.cost}))),i.a.createElement("div",{className:"row mb-4"},i.a.createElement("div",{className:"form-group col-md-12 col-12"},i.a.createElement("label",{className:"gray-label mb-1"},"Select Tests"),i.a.createElement(m.a,{isMulti:!0,options:F,FilterData:J,noOptionsMessage:"Search & Select Tests",value:Y,onChange:function(e){return e&&e.length?W(Object(r.a)(e),"tests"):W([],"tests")},error:x&&x.tests})))),i.a.createElement("div",{className:"row mb-4 text-center"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement(p.OutlinedButton,{red:!0,className:"mr-2",onClick:function(){N(E),e.history.goBack()},disabled:A},"Cancel"),i.a.createElement(p.OutlinedButton,{blue:!0,onClick:z,disabled:A,btnLoading:A},"Save"))))}},198:function(e,t,a){"use strict";var n=a(0),s=a.n(n),r=a(224);t.a=function(e){var t=e.className,a=void 0===t?"":t,l=e.options,c=void 0===l?[]:l,o=e.noOptionsMessage,u=e.value,i=e.onChange,d=e.placeholder,p=e.error,m=e.hasGrayBack,f=void 0!==m&&m,v=e.isMulti,b=void 0!==v&&v,O=(e.hideSelectedOptions,e.isClearable),h=void 0===O||O,g=e.disabled,E=e.isLoading,j=e.FilterData,y="input-group select-control-input ".concat(p?"has-error":""," ").concat(f?"background-gray":""," ").concat(u&&u.value?"has-value":""," ").concat(g?"cursor-notAllowed":"");a+=" select-input ";var N=Object(n.useRef)(null);return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:y,ref:N},s.a.createElement(r.a,{value:u,defaultOptions:c,noOptionsMessage:function(){return o},onChange:i,loadOptions:function(e){return e.length&&j(e)},className:a,classNamePrefix:"select-input",placeholder:s.a.createElement("div",null,""),onFocus:function(){return N.current.classList.add("select-focused")},onBlur:function(){return N.current.classList.remove("select-focused")},isClearable:h,isMulti:b,removeSelected:!1,isDisabled:g,isLoading:E}),s.a.createElement("label",{className:"select-placeholder"},d)),p?s.a.createElement("p",{className:"assistive-text error-text"},p):s.a.createElement("p",{className:"assistive-text"}))}},207:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return r}));var n=[{label:"Both",value:"both"},{label:"Male",value:"male"},{label:"Female",value:"female"}],s=[{label:"Male",value:"male"},{label:"Female",value:"female"}],r=[{label:"A+",value:"A+"},{label:"A-",value:"A-"},{label:"B+",value:"B+"},{label:"B-",value:"B-"},{label:"O+",value:"O+"},{label:"O-",value:"O-"},{label:"AB+",value:"AB+"},{label:"AB-",value:"AB-"}]},224:function(e,t,a){"use strict";var n=a(138),s=a(5),r=(a(280),a(281),a(282),a(164)),l=a(161),c=(a(241),a(167)),o=a(168),u=a(169),i=a(0),d=a.n(i),p=(a(258),a(29),a(242),a(259)),m=a(220),f=(a(206),a(283),a(260),a(284));function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var s=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(o.a)(this,a)}}var b={cacheOptions:!1,defaultOptions:!1,filterOption:null,isLoading:!1},O=function(e){var t,a;return a=t=function(t){Object(c.a)(o,t);var a=v(o);function o(e){var t;return Object(r.a)(this,o),(t=a.call(this)).select=void 0,t.lastRequest=void 0,t.mounted=!1,t.optionsCache={},t.handleInputChange=function(e,a){var n=t.props,s=n.cacheOptions,r=n.onInputChange,l=Object(p.f)(e,a,r);if(!l)return delete t.lastRequest,void t.setState({inputValue:"",loadedInputValue:"",loadedOptions:[],isLoading:!1,passEmptyOptions:!1});if(s&&t.optionsCache[l])t.setState({inputValue:l,loadedInputValue:l,loadedOptions:t.optionsCache[l],isLoading:!1,passEmptyOptions:!1});else{var c=t.lastRequest={};t.setState({inputValue:l,isLoading:!0,passEmptyOptions:!t.state.loadedInputValue},(function(){t.loadOptions(l,(function(e){t.mounted&&(e&&(t.optionsCache[l]=e),c===t.lastRequest&&(delete t.lastRequest,t.setState({isLoading:!1,loadedInputValue:l,loadedOptions:e||[],passEmptyOptions:!1})))}))}))}return l},t.state={defaultOptions:Array.isArray(e.defaultOptions)?e.defaultOptions:void 0,inputValue:"undefined"!==typeof e.inputValue?e.inputValue:"",isLoading:!0===e.defaultOptions,loadedOptions:[],passEmptyOptions:!1},t}return Object(l.a)(o,[{key:"componentDidMount",value:function(){var e=this;this.mounted=!0;var t=this.props.defaultOptions,a=this.state.inputValue;!0===t&&this.loadOptions(a,(function(t){if(e.mounted){var a=!!e.lastRequest;e.setState({defaultOptions:t||[],isLoading:a})}}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.cacheOptions!==this.props.cacheOptions&&(this.optionsCache={}),e.defaultOptions!==this.props.defaultOptions&&this.setState({defaultOptions:Array.isArray(e.defaultOptions)?e.defaultOptions:void 0})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"loadOptions",value:function(e,t){var a=this.props.loadOptions;if(!a)return t();var n=a(e,t);n&&"function"===typeof n.then&&n.then(t,(function(){return t()}))}},{key:"render",value:function(){var t=this,a=this.props,r=(a.loadOptions,a.isLoading),l=Object(n.a)(a,["loadOptions","isLoading"]),c=this.state,o=c.defaultOptions,u=c.inputValue,i=c.isLoading,p=c.loadedInputValue,m=c.loadedOptions,f=c.passEmptyOptions?[]:u&&p?m:o||[];return d.a.createElement(e,Object(s.a)({},l,{ref:function(e){t.select=e},options:f,isLoading:i||r,onInputChange:this.handleInputChange}))}}]),o}(i.Component),t.defaultProps=b,a}(Object(f.a)(m.a));t.a=O}}]);
//# sourceMappingURL=39.c0a30f14.chunk.js.map