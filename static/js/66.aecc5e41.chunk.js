(this["webpackJsonpsugarlogger-frontend"]=this["webpackJsonpsugarlogger-frontend"]||[]).push([[66],{1496:function(e,a,t){"use strict";t.r(a);var n=t(14),l=t.n(n),c=t(13),s=t(18),r=t(9),o=t(0),m=t.n(o),i=t(182),u=t(17),d=t(3),p=t(19),b=t(22);a.default=function(e){var a=Object(o.useContext)(u.a),t=a.profile,n=a.setProfileData,f=(t||(localStorage.getItem("roles")?JSON.parse(localStorage.getItem("roles")):{})).roles,g=t&&t.data||{},v=g.first_name,E=g.last_name,N=Object(o.useState)(!1),h=Object(r.a)(N,2),j=h[0],w=h[1],_=localStorage.getItem("first_name"),O=localStorage.getItem("last_name"),k=Object(o.useCallback)(Object(s.a)(l.a.mark((function a(){var t,n,s,r,o;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return w(!0),a.next=3,Object(b.fetchRequest)({url:"/user_profile?include=roles,lab_access",method:"GET",isAuth:!0});case 3:if(!(t=a.sent)||200!==t.status){a.next=14;break}return w(!1),a.next=8,t.json();case 8:n=a.sent,s=n.data,r=s.roles,o=[],r&&r.length&&(o=Object(p.d)(Object(c.a)({},s))),o&&1===o.length&&e.history.push("/".concat(o[0].role.name.split("_").join("-")));case 14:case"end":return a.stop()}}),a)}))),[]);Object(o.useEffect)((function(){window.scrollTo(0,0),k()}),[t]);var x=Object(o.useCallback)((function(a){localStorage.setItem("loginAs",a.role.name.split("_").join("-")),localStorage.setItem("selectedRole",JSON.stringify(a)),n({selectedRole:Object(c.a)({},a)}),e.history.push("/".concat(a.role.name.split("_").join("-")))}),[n,e]);return m.a.createElement(i.a,{sectionClass:"login-as"},m.a.createElement("div",{className:"col-md-12"},m.a.createElement("div",{className:"content-wrapper"},m.a.createElement("span",{className:"black-heading"},"Login as:"),m.a.createElement("div",{className:"btn-wrapper"},j&&m.a.createElement("div",{className:"spinner-border",role:"status"},m.a.createElement("span",{className:"sr-only"},"Loading...")),f&&f.map((function(e,a){var t,n,l,c;return m.a.createElement("div",{className:"flex-column w-100",key:a},m.a.createElement(d.b,{key:a,to:"/",onClick:function(){return x(e)},className:"row login-option d-flex align-items-center mb-3 p-2 mx-0"},m.a.createElement("div",{className:"col-3 w-100"},m.a.createElement("p",{className:"user-img small role_".concat(e.role.name)},Object(p.c)("".concat(null!==(t=null!==_&&void 0!==_?_:v)&&void 0!==t?t:""," ").concat(null!==(n=null!==O&&void 0!==O?O:E)&&void 0!==n?n:"")))),m.a.createElement("div",{className:"col-9 w-100 text-left login-as"},m.a.createElement("p",{className:"user-name"},"".concat(null!==(l=null!==_&&void 0!==_?_:v)&&void 0!==l?l:""," ").concat(null!==(c=null!==O&&void 0!==O?O:E)&&void 0!==c?c:"")),m.a.createElement("p",{className:"lab-name"},e.role.formatted_name),m.a.createElement("div",{className:"d-flex"},e.lab_name&&m.a.createElement("p",{className:"lab-name"},"".concat(e.lab_name," ")),e.branch_name&&m.a.createElement("p",{className:"lab-name ml-1"}," - ".concat(e.branch_name))))))}))))))}},182:function(e,a,t){"use strict";t.d(a,"a",(function(){return c}));var n=t(0),l=t(20),c=function(e){var a=e.children,t=e.sectionClass;return n.createElement("section",{className:"section-wrapper ".concat(t,"-section")},n.createElement(l.a,null,n.createElement("div",{className:"row section-content-wrapper"},a)))}}}]);
//# sourceMappingURL=66.aecc5e41.chunk.js.map