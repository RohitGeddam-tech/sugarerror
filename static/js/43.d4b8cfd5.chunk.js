(this["webpackJsonpsugarlogger-frontend"]=this["webpackJsonpsugarlogger-frontend"]||[]).push([[43],{1504:function(e,t,a){"use strict";a.r(t);var n=a(6),c=a(13),r=a(14),s=a.n(r),l=a(18),o=a(9),i=a(0),u=a.n(i),d=a(2),m=a(10),f=a(183),p=a(155),b=a(38),h=a(22),g=a(149),v=a(413),y=a(179),E=a.n(y),_=a(245),j=(a(246),a(247),[{labelAsIcon:d.n,accessKey:"checked",keyToCheck:"uuid",renderIcon:d.n,isCheckbox:!0,isMobile:!1},{label:"Date",accessKey:"created_at",dateFilter:{show:!0,selectDateRange:!1}},{label:"Name",accessKey:"name",classes:"main-content semi-bold"},{label:"Email ID",accessKey:"email",isMobile:!1},{label:"Mobile No.",accessKey:"mobile",isMobile:!1},{label:"Type",cursor:"pointer",accessKey:"type",renderFilterIcon:{icon:d.B,key:"ref"},isMobile:!1},{label:"Status",cursor:"pointer",accessKey:"formatted_status",isMobile:!1,renderFilterIcon:{icon:d.B,key:"ref"},cellRenderer:function(e){return u.a.createElement("span",{className:"semi-bold status-".concat(e.status)},e.formatted_status)}},{label:"Attended by",cursor:"pointer",accessKey:"attended_user.full_name",renderFilterIcon:{icon:d.B,key:"ref"},isMobile:!1},{label:"",accessKey:"more",isMobile:!1,cellRenderer:function(e){return u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement(f.a,{button:u.a.createElement("p",{className:"table-icon"},d.I),className:"view-detail-popover"},u.a.createElement(m.TextButton,{link:!0,to:{pathname:"/".concat(localStorage.getItem("loginAs"),"/contact-leads/").concat(e.uuid),state:{leadId:e.uuid}},className:"list-btn"},"View All Details")))}}]);t.default=function(){var e=Object(b.a)(),t=Object(o.a)(e,1)[0],a=Object(i.useState)({data:[],pagination:{}}),r=Object(o.a)(a,2),m=r[0],f=r[1],y=Object(i.useState)({per_page:15,sort:[],current_page:1,date_from:E()().subtract(1,"year").format("YYYY-MM-DD"),date_to:E()().format("YYYY-MM-DD")}),O=Object(o.a)(y,2),D=O[0],k=O[1],N=Object(i.useState)(!1),x=Object(o.a)(N,2),S=x[0],C=x[1],Y=Object(i.useState)([]),w=Object(o.a)(Y,2),M=w[0],A=w[1],I=Object(i.useState)([{name:"Contact Form",formatted:"contact_form"},{name:"Lab Registration",formatted:"lab_registration"}]),L=Object(o.a)(I,2),T=L[0],F=(L[1],Object(i.useState)([])),R=Object(o.a)(F,2),K=R[0],B=R[1],P=Object(i.useState)(!1),q=Object(o.a)(P,2),G=q[0],J=q[1],U=Object(i.useState)([]),V=Object(o.a)(U,2),z=V[0],H=(V[1],Object(i.useState)([])),Q=Object(o.a)(H,2),W=Q[0],X=Q[1],Z=Object(i.useState)([]),$=Object(o.a)(Z,2),ee=$[0],te=$[1],ae=Object(i.useState)(!1),ne=Object(o.a)(ae,2),ce=ne[0],re=ne[1],se=Object(i.useState)([]),le=Object(o.a)(se,2),oe=le[0],ie=le[1],ue=Object(i.useState)([]),de=Object(o.a)(ue,2),me=de[0],fe=de[1],pe=Object(i.useState)(!1),be=Object(o.a)(pe,2),he=be[0],ge=be[1],ve=Object(i.useState)(null),ye=Object(o.a)(ve,2),Ee=(ye[0],ye[1]),_e=Object(i.useState)({start:E()(),end:E()()}),je=Object(o.a)(_e,2),Oe=(je[0],je[1]),De=Object(i.useState)([]),ke=Object(o.a)(De,2),Ne=ke[0],xe=ke[1],Se=Object(i.useCallback)((function(){C(!0),re(!1),ge(!1),J(!1);for(var e=0;e<me.length;e++)z.includes(me[e])||z.push(me[e]);for(var t=0;t<ee.length;t++)z.includes(ee[t])||z.push(ee[t]);for(var a=0;a<K.length;a++)z.includes(K[a])||z.push(K[a]);var n=D.per_page,c=void 0===n?15:n,r=D.current_page,o=D.search,i=D.date_from,u=D.date_to,d=D.sort;Object(l.a)(s.a.mark((function e(){var t,a,n,l,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/super_admin/contact_lead?per_page=".concat(c).concat(r?"&page=".concat(r):"").concat(o?"&search=".concat(o):"").concat(0!==ee.length?"&status=".concat(Ae()):"").concat(0!==me.length?"&attended_by=".concat(Ie()):"").concat(0!==K.length?"&type=".concat(Le()):"").concat(i?"&date_from=".concat(i):"").concat(u&&"Invalid date"!==u?"&date_to=".concat(u):"").concat(d&&d.length?d.map((function(e){return"&".concat(e.key,"=").concat(e.value)})).join(""):""),e.next=3,Object(h.fetchRequest)({url:t,method:"GET",isAuth:!0});case 3:if(a=e.sent,C(!1),!a||200!==a.status){e.next=13;break}return e.next=8,a.json();case 8:return n=e.sent,l=n.data,m=n.meta,f({data:l,pagination:m.pagination}),e.abrupt("return",l);case 13:return e.abrupt("return");case 14:case"end":return e.stop()}}),e)})))()}),[D]);Object(i.useEffect)((function(){Se({})}),[Se]),Object(i.useEffect)((function(){!function(){C(!0);D.per_page,D.current_page,D.search,D.date_from,D.date_to,D.sort;Object(l.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/super_admin/contact_lead_attended_by",e.next=3,Object(h.fetchRequest)({url:"/super_admin/contact_lead_attended_by",method:"GET",isAuth:!0});case 3:if(t=e.sent,C(!1),!t||200!==t.status){e.next=13;break}return e.next=8,t.json();case 8:return a=e.sent,n=a.data,a.meta,ie(n),e.abrupt("return",n);case 13:return e.abrupt("return");case 14:case"end":return e.stop()}}),e)})))()}(),function(){C(!0);D.per_page,D.current_page,D.search,D.date_from,D.date_to,D.sort;Object(l.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/super_admin/contact_statuses",e.next=3,Object(h.fetchRequest)({url:"/super_admin/contact_statuses",method:"GET",isAuth:!0});case 3:if(t=e.sent,C(!1),!t||200!==t.status){e.next=13;break}return e.next=8,t.json();case 8:return a=e.sent,n=a.data,a.meta,X(n),e.abrupt("return",n);case 13:return e.abrupt("return");case 14:case"end":return e.stop()}}),e)})))()}()}),[]);var Ce=Object(i.useCallback)((function(e){return A(e)}),[]),Ye=D.date_from&&E()(D.date_from).format("DD-MM-YYYY")+" to "+E()(D.date_to).format("DD-MM-YYYY"),we={Today:[E()().toDate(),E()().toDate()],Yesterday:[E()().subtract(1,"days").toDate(),E()().subtract(1,"days").toDate()],"This Month":[E()().startOf("month").toDate(),E()().endOf("month").toDate()],"Last 7 Days":[E()().subtract(6,"days").toDate(),E()().toDate()],"Last 30 Days":[E()().subtract(29,"days").toDate(),E()().toDate()],"Last 6 Months":[E()().subtract(6,"months").toDate(),E()().toDate()],"Last 1 Year":[E()().subtract(1,"year").toDate(),E()().toDate()]},Me=function(e,t,a){if("Attendedby"===t)if(me.includes(a))for(var n=0;n<me.length;n++)a===me[n]&&(me.splice(n,1),Ee({status:!0,data:a}));else me.push(a),Ee({status:!0,data:a});else if("Status"===t)if(ee.includes(a))for(var c=0;c<ee.length;c++)a===ee[c]&&(ee.splice(c,1),Ee({status:!0,data:a}));else ee.push(a),Ee({status:!0,data:a});else if(K.includes(a))for(var r=0;r<K.length;r++)a===K[r]&&(K.splice(r,1),Ee({status:!0,data:a}));else K.push(a),Ee({status:!0,data:a})},Ae=function(){var e="";return ee.forEach((function(t){e=""===e?t:e+","+t})),e},Ie=function(){var e="";return me.forEach((function(t){e=""===e?t:e+","+t})),e},Le=function(){var e="";return K.forEach((function(t){e=""===e?t:e+","+t})),e},Te=function(e){if("remove_filter"===e){K.length=0,Se();for(var t=0;t<Ne.length;t++)"Type"===Ne[t]&&Ne.splice(t,1);J(!1)}else{for(var a=[],c=0;c<K.length;c++)z.includes(K[c])&&a.push(K[c]);if(K.length=0,B([].concat(Object(n.a)(K),a)),0===K.length)for(var r=0;r<Ne.length;r++)"Type"===Ne[r]&&Ne.splice(r,1);J(!1)}},Fe=function(e){if("remove_filter"===e){ee.length=0,Se();for(var t=0;t<Ne.length;t++)"Status"===Ne[t]&&Ne.splice(t,1);re(!1)}else{for(var a=[],c=0;c<ee.length;c++)z.includes(ee[c])&&a.push(ee[c]);if(ee.length=0,te([].concat(Object(n.a)(ee),a)),0===ee.length)for(var r=0;r<Ne.length;r++)"Status"===Ne[r]&&Ne.splice(r,1);re(!1)}},Re=function(e){if("remove_filter"===e){me.length=0,Se();for(var t=0;t<Ne.length;t++)"Attended by"===Ne[t]&&Ne.splice(t,1);ge(!1)}else{for(var a=[],c=0;c<me.length;c++)z.includes(me[c])&&a.push(me[c]);if(me.length=0,fe([].concat(Object(n.a)(me),a)),0===me.length)for(var r=0;r<Ne.length;r++)"Attended by"===Ne[r]&&Ne.splice(r,1);ge(!1)}};return u.a.createElement("div",{className:"paper card contact-lead-container list-container"},u.a.createElement("div",{className:"content-header"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-6 col-md-2"},u.a.createElement("p",{className:"semi-bold title"},"All Contact Leads")),u.a.createElement("div",{className:"col-6 col-md-2"},u.a.createElement("div",{className:"form-group text-right"},u.a.createElement(v.a,{path:"/super_admin/contact_lead_export",filter:D,selectedData:M}))),u.a.createElement("div",{className:"col-md-4 col-12 customDatePicker-wrapper"},u.a.createElement(_.a,{className:"customDatePicker",id:"customDatePicker",initialSettings:{maxDate:new Date,startDate:E()().subtract(1,"year").toDate(),endDate:E()().toDate(),ranges:we,autoUpdateInput:!0},onCallback:function(e,t){Oe({start:e,end:t}),k(Object(c.a)(Object(c.a)({},D),{},{date_from:E()(e._d).format("YYYY-MM-DD"),date_to:E()(t._d).format("YYYY-MM-DD"),current_page:1}))}},u.a.createElement("div",{className:"customDatePicker-innerwrapper"},u.a.createElement("span",{className:Ye?"range-value":"range-placeholder"},Ye||"Select Range"),u.a.createElement("label",{className:"table-icon d-inline"},d.i)))),u.a.createElement("div",{className:"push-4 col-md-4"},u.a.createElement(g.a,{setFilter:k,filter:D,placeholder:"Search by Name or Mobile No."}))),t<=768?u.a.createElement("div",{className:"d-flex justify-content-end mr-2 filter"},u.a.createElement("p",{className:"mr-1"},d.B)," ",u.a.createElement("p",null,"Filter")):u.a.createElement(u.a.Fragment,null)),u.a.createElement("div",{className:"content-body"},!0===ce?u.a.createElement("div",{className:"filter_container"},u.a.createElement("div",{className:"filter_subcontainer_reff"},W.map((function(e){return u.a.createElement("div",{key:e.status},u.a.createElement("label",null,u.a.createElement("input",{onChange:function(t){return Me(0,"Status",e.status)},checked:!!ee.includes(e.status),type:"checkbox"})," ",e.formatted_status))}))),u.a.createElement("div",{className:"filter_options"},u.a.createElement("span",{onClick:function(){return Fe("remove_filter")},style:{color:"rgba(223, 116, 106, 1)"}},"Remove filter"),u.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},u.a.createElement("span",{onClick:function(){return Fe("cancel")}},"Cancel"),0===ee.length?u.a.createElement("span",{style:{paddingLeft:10}},"Apply"):u.a.createElement("span",{onClick:function(){return Se()},style:{paddingLeft:10,color:"blue"}},"Apply")))):u.a.createElement("div",null),!0===he?u.a.createElement("div",{className:"filter_container_att"},u.a.createElement("div",{className:"filter_subcontainer_reff"},oe.map((function(e){return u.a.createElement("div",{key:e.uuid},u.a.createElement("label",null,u.a.createElement("input",{onChange:function(t){return Me(0,"Attendedby",e.uuid)},checked:!!me.includes(e.uuid),type:"checkbox"})," ",e.full_name))}))),u.a.createElement("div",{className:"filter_options"},u.a.createElement("span",{onClick:function(){return Re("remove_filter")},style:{color:"rgba(223, 116, 106, 1)"}},"Remove filter"),u.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},u.a.createElement("span",{onClick:function(){return Re("cancel")}},"Cancel"),0===me.length?u.a.createElement("span",{style:{paddingLeft:10}},"Apply"):u.a.createElement("span",{onClick:function(){return Se()},style:{paddingLeft:10,color:"blue"}},"Apply")))):u.a.createElement("div",null),!0===G?u.a.createElement("div",{className:"filter_container_type"},u.a.createElement("div",{className:"filter_subcontainer_reff"},T.map((function(e){return u.a.createElement("div",{key:e.formatted},u.a.createElement("label",null,u.a.createElement("input",{onChange:function(t){return Me(0,"Type",e.formatted)},checked:!!K.includes(e.formatted),type:"checkbox"})," ",e.name))}))),u.a.createElement("div",{className:"filter_options"},u.a.createElement("span",{onClick:function(){return Te("remove_filter")},style:{color:"rgba(223, 116, 106, 1)"}},"Remove filter"),u.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},u.a.createElement("span",{onClick:function(){return Te("cancel")}},"Cancel"),0===K.length?u.a.createElement("span",{style:{paddingLeft:10}},"Apply"):u.a.createElement("span",{onClick:function(){return Se()},style:{paddingLeft:10,color:"blue"}},"Apply")))):u.a.createElement("div",null),u.a.createElement(p.a,{columnDefs:j,tableData:m.data,selectedFilters:Ne,openFilterAction:function(e,t){"Status"===t?(re(!0),ge(!1),J(!1),Ne.includes("Status")||Ne.push(t),xe(xe)):"Type"===t?(J(!0),ge(!1),re(!1),Ne.includes("Type")||Ne.push(t),xe(xe)):"Attended by"===t&&(ge(!0),re(!1),J(!1),Ne.includes("Attended by")||Ne.push(t),xe(xe))},pagination:Object(c.a)(Object(c.a)({},m.pagination),{},{getListPerPage:function(e){k(Object(c.a)(Object(c.a)({},D),e))}}),renderCheckbox:d.n,isButtonCard:u.a.createElement("span",{className:"next-arrow"},d.x),setFilter:k,filter:D,isLoading:S,listName:"leads",getSelectedData:Ce})))}},183:function(e,t,a){"use strict";var n=a(0),c=a.n(n);t.a=function(e){var t=e.button,a=e.children,n=e.className,r=void 0===n?"":n;return c.a.createElement("div",{className:"nav-item dropdown popover-dropdown"},c.a.createElement("span",{className:"nav-item nav-link dropdown-toggle",id:"bd-versions","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},t),c.a.createElement("div",{className:"dropdown-menu dropdown-menu-md-right ".concat(r),"aria-labelledby":"bd-versions"},a))}}}]);
//# sourceMappingURL=43.d4b8cfd5.chunk.js.map