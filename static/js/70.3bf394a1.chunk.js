(this["webpackJsonpsugarlogger-frontend"]=this["webpackJsonpsugarlogger-frontend"]||[]).push([[70],{1523:function(e,t,a){"use strict";a.r(t);var n=a(13),r=a(14),c=a.n(r),o=a(18),s=a(9),l=a(0),i=a.n(l),u=a(10),d=a(2),m=a(155),b=a(17),p=a(22),f=a(150),D=a(179),_=a.n(D),g=a(245),Y=(a(246),a(247),a(782));t.default=function(){var e=Object(l.useContext)(b.a).profile,t=Object(l.useState)({data:[],pagination:{}}),a=Object(s.a)(t,2),r=a[0],D=a[1],v=Object(l.useState)({per_page:15,current_page:1,sort:[],selectedDate:_()().subtract(1,"year").format("YYYY-MM-DD"),date_from:_()().subtract(1,"year").format("YYYY-MM-DD"),date_to:_()().format("YYYY-MM-DD")}),h=Object(s.a)(v,2),O=h[0],j=h[1],w=Object(l.useState)(!1),M=Object(s.a)(w,2),y=M[0],E=M[1],N=Object(l.useState)({start:_()(),end:_()()}),k=Object(s.a)(N,2),R=(k[0],k[1]),C=[{label:"Date / Time",width:"7%",dateFilter:{show:!0,selectDateRange:!1},accessKey:"created_at"},{label:"Patient Name",width:"12%",accessKey:"patient.full_name",classes:"main-content semi-bold",isMobile:!1},{label:"Lab Name",width:"18%",accessKey:"lab.formatted_lab_name"},{label:"Referral",width:"12%",cellRenderer:function(e){var t=e.referred_by;return(null===t||void 0===t?void 0:t.full_name)||"Self"},isMobile:!1},{label:"Tests",width:"20%",accessKey:"package_name",cellRenderer:function(e){var t=e.tests;return t.map((function(e,a){return a===t.length-1?e:e+", "}))}},{label:"Cost",width:"10%",cellRenderer:function(e){var t=e.total_amount;return"".concat(f.a," ").concat(t)},isMobile:!1},{label:"Status",width:"10%",cellRenderer:function(e){var t=e.appointment_status;return i.a.createElement(u.OutlinedButton,{className:"patient-status-btn ".concat(t.name)},t.formatted_name)}},{label:"Action",width:"12%",isMobile:!1,cellRenderer:function(e){return i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement(u.OutlinedButton,{blue:!0,link:!0,to:{pathname:"/patient/view-report",state:{reportId:e.uuid}},disabled:!e.view_report},"View Report"))},isActionColumn:!0}];Object(l.useEffect)((function(){window.scrollTo(0,0)}),[]);var S=Object(l.useCallback)((function(){E(!0);var t=O.per_page,a=void 0===t?15:t,n=O.current_page,r=O.date_from,s=O.date_to,l=O.sort;a&&Object(o.a)(c.a.mark((function t(){var o,i,u,d,m;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="/patient/".concat(e.selectedRole.uuid,"/reports").concat(r?"?date_from=".concat(r):"").concat(s&&"Invalid date"!==s?"&date_to=".concat(s):"","&per_page=").concat(a).concat(n?"&page=".concat(n):"").concat(l&&l.length?l.map((function(e){return"&".concat(e.key,"=").concat(e.value)})).join(""):""),t.next=3,Object(p.fetchRequest)({url:o,method:"GET",isAuth:!0});case 3:if(!(i=t.sent)||200!==i.status){t.next=15;break}return E(!1),t.next=8,i.json();case 8:return u=t.sent,d=u.data,m=u.meta,D({data:d,pagination:m.pagination}),t.abrupt("return",d);case 15:E(!1);case 16:return t.abrupt("return");case 17:case"end":return t.stop()}}),t)})))()}),[O,e]);Object(l.useEffect)((function(){var e=O.date_from,t=O.date_to;S({date_from:e,date_to:t})}),[O,S]);var x=Object(l.useCallback)((function(e){j((function(t){return Object(n.a)(Object(n.a)({},t),e)}))}),[]),L=O.date_from&&_()(O.date_from).format("DD-MM-YYYY")+" to "+_()(O.date_to).format("DD-MM-YYYY"),P={Today:[_()().toDate(),_()().toDate()],Yesterday:[_()().subtract(1,"days").toDate(),_()().subtract(1,"days").toDate()],"This Month":[_()().startOf("month").toDate(),_()().endOf("month").toDate()],"Last 7 Days":[_()().subtract(6,"days").toDate(),_()().toDate()],"Last 30 Days":[_()().subtract(29,"days").toDate(),_()().toDate()],"Last 6 Months":[_()().subtract(6,"months").toDate(),_()().toDate()],"Last 1 Year":[_()().subtract(1,"year").toDate(),_()().toDate()]};return i.a.createElement("div",{className:"paper card list-container report-bills-container"},i.a.createElement("div",{className:"content-header"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-6 col-md-9"},i.a.createElement("p",{className:"semi-bold title"},"All Reports")),i.a.createElement("div",{className:"col-md-3 col-12 customDatePicker-wrapper"},i.a.createElement(g.a,{className:"customDatePicker",id:"customDatePicker",initialSettings:{maxDate:new Date,startDate:_()().subtract(1,"year").toDate(),endDate:_()().toDate(),ranges:P,autoUpdateInput:!0},onCallback:function(e,t){R({start:e,end:t}),j(Object(n.a)(Object(n.a)({},O),{},{date_from:_()(e._d).format("YYYY-MM-DD"),date_to:_()(t._d).format("YYYY-MM-DD"),current_page:1}))}},i.a.createElement("div",{className:"customDatePicker-innerwrapper"},i.a.createElement("span",{className:L?"range-value":"range-placeholder"},L||"Select Range"),i.a.createElement("label",{className:"table-icon d-inline"},d.i)))))),i.a.createElement("div",{className:"content-body"},i.a.createElement(m.a,{columnDefs:C,tableData:r.data,pagination:Object(n.a)(Object(n.a)({},r.pagination),{},{getListPerPage:x}),isButtonCard:i.a.createElement("span",null,d.J),MobileCardComponent:Y.a,setFilter:j,filter:O,isLoading:y,listName:"reports"})))}}}]);
//# sourceMappingURL=70.3bf394a1.chunk.js.map