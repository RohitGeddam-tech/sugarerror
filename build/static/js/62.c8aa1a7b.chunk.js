(this["webpackJsonpsugarlogger-frontend"]=this["webpackJsonpsugarlogger-frontend"]||[]).push([[62],{152:function(e,a,t){"use strict";var n=t(0),l=t.n(n),c=t(2);a.a=function(e){var a=e.name,t=e.label,n=e.value,r=e.checked,o=void 0!==r&&r,s=e.onClick,i=e.blue,m=(e.red,e.className),d=void 0===m?"":m,u=e.disabled,v=i?"blue":"red";return l.a.createElement("div",{className:"d-flex checkbox-input ".concat(d," pure-material-checkbox ").concat(u?"disabled":"")},l.a.createElement("input",{type:"checkbox",name:a,value:n,checked:o,disabled:u,onChange:s}),l.a.createElement("div",{className:"mr-3 checkbox-checked ".concat(v),onClick:function(){u||s()}},c.m),l.a.createElement("label",{dangerouslySetInnerHTML:{__html:t}}))}},1526:function(e,a,t){"use strict";t.r(a);var n=t(6),l=t(14),c=t.n(l),r=t(13),o=t(18),s=t(9),i=t(0),m=t.n(i),d=t(4),u=t(2),v=t(347),b=t(10),p=t(547),f=t(152),E=t(17),g=t(22),N=t(19),h=t(390);a.default=function(){var e=Object(i.useContext)(E.a).profile,a=Object(d.g)(),t=Object(i.useState)({}),l=Object(s.a)(t,2),_=l[0],w=l[1],x=Object(i.useState)({}),j=Object(s.a)(x,2),k=j[0],O=j[1],y=Object(i.useState)([]),R=Object(s.a)(y,2),C=R[0],A=R[1],L=Object(i.useState)([]),B=Object(s.a)(L,2),S=B[0],T=B[1],U=Object(i.useState)(!1),q=Object(s.a)(U,2),D=q[0],M=q[1],G=Object(i.useState)({show:!1,message:"",type:""}),I=Object(s.a)(G,2),H=I[0],J=I[1],P=_.reportId,F=_.patient,Z=_.referred_by,z=_.created_at,K=Object(i.useCallback)(Object(o.a)(c.a.mark((function a(){var t,n,l;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!P){a.next=13;break}return O(k),J(H),a.next=5,Object(g.fetchRequest)({url:"/patient/".concat(e.selectedRole.uuid,"/reports/").concat(P),method:"GET",isAuth:!0});case 5:if(!(t=a.sent)||200!==t.status){a.next=13;break}return a.next=9,t.json();case 9:return n=a.sent,(l=n.data)&&(A(Object(N.b)(l)),w(Object(r.a)(Object(r.a)({},_),l))),a.abrupt("return",l);case 13:case"end":return a.stop()}}),a)}))),[P,e,_]);Object(i.useEffect)((function(){P&&(M(!1),K())}),[P]),Object(i.useEffect)((function(){a.location.state&&w(a.location.state)}),[a]);var Q=Object(i.useMemo)((function(){return C.map((function(e){var a,t,l=e.test_remark,c=e.appt_sub_tests,r=e.name,o=e.report_type,s=e.report_sent,i=e.interpretation,d=e.technique,u=e.method,v=e.note,b=e.test_id,E=e.unit,g=e.test_validation,_=e.showRangeColumn,w=e.remark;return{className:s?"report-sent-success":"",disable:!s,renderCheckBox:m.a.createElement(f.a,{name:"select-all",className:"ml-2",checked:S.includes(b),disabled:!s,blue:!0,onClick:function(){M(!1);var e=Object(n.a)(S);e.includes(b)?e.splice(e.indexOf(b),1):e.push(b),T(e)}}),heading:m.a.createElement("div",{className:"d-flex justify-content-between align-items-center w-100"},m.a.createElement("p",null,r),s&&m.a.createElement("i",{className:"mr-5 semi-bold report-status"},"Report Available")),body:m.a.createElement("div",{className:"test-result-card"},m.a.createElement("table",{className:"test-result-table"},m.a.createElement("thead",{className:"on-mobile-hide"},m.a.createElement("tr",null,m.a.createElement("th",{width:"30%"},"Test"),m.a.createElement("th",{width:"45%"},"Result"),_&&m.a.createElement("th",{className:"text-center",width:"25%"},"Normal Range"))),(null===e||void 0===e||null===(a=e.appt_sub_tests)||void 0===a?void 0:a.length)?c.map((function(e,a){var t,n,l=e.unit,c=e.report_type,r=e.test_validation;return m.a.createElement("tbody",{key:a},"group"===e.test_type?m.a.createElement("tr",{key:a},m.a.createElement("td",{colSpan:"3",className:"test-name"},m.a.createElement("p",null,e.name))):m.a.createElement(m.a.Fragment,null),(null===e||void 0===e||null===(t=e.appt_sub_tests)||void 0===t?void 0:t.length)?e.appt_sub_tests.map((function(a,t){var n,l,c=a.unit,r=a.report_type,o=a.test_validation;e.appt_sub_tests.length;return m.a.createElement("tr",{key:t,className:"group-test-div ".concat(a.abnormal?"is-abnormal":"")},m.a.createElement("td",null,m.a.createElement("p",{className:"sub-test-name"},a.name),m.a.createElement("p",{className:"on-mobile-show default-range"},"Range"===r.name?"Normal Range: ".concat((null===o||void 0===o?void 0:o.range_from)?o.range_from:"NA"," - ").concat((null===o||void 0===o?void 0:o.range_to)?o.range_to:"NA"," ").concat((null===c||void 0===c?void 0:c.name)?c.name:""):"")),m.a.createElement("td",{className:"test-result ".concat("Range"===(null===r||void 0===r?void 0:r.name)?"range-test-result":"")},(null===(n=r.format)||void 0===n?void 0:n.presentation.result)?"string"===typeof a.value?a.value:null===(l=a.value)||void 0===l?void 0:l.label:"-"),m.a.createElement("td",{className:"text-center on-mobile-hide"},"Range"===r.name?"".concat((null===o||void 0===o?void 0:o.range_from)?o.range_from:"NA"," - ").concat((null===o||void 0===o?void 0:o.range_to)?o.range_to:"NA"," ").concat((null===c||void 0===c?void 0:c.name)?c.name:""):""))})):m.a.createElement("tr",{key:a,className:e.abnormal?"is-abnormal":""},m.a.createElement("td",null,m.a.createElement("p",{className:"sub-test-name"},e.name),m.a.createElement("p",{className:"on-mobile-show default-range"},"Range"===c.name?"Normal Range: ".concat((null===r||void 0===r?void 0:r.range_from)?r.range_from:"NA"," - ").concat((null===r||void 0===r?void 0:r.range_to)?r.range_to:"NA"," ").concat((null===l||void 0===l?void 0:l.name)?l.name:""):"")),m.a.createElement("td",{className:"test-result ".concat("Range"===(null===c||void 0===c?void 0:c.name)?"range-test-result":"")},(null===(n=c.format)||void 0===n?void 0:n.presentation.result)?function(e,a){var t,n=a&&Object(N.g)(a,e.value);return m.a.createElement("label",{className:n?"out-of-range":""},"Pre-Defined Test Result"==e.report_type.name?m.a.createElement("label",{className:"editor-content"},Object(h.a)(e.value)):"string"===typeof e.value?e.value:null===(t=e.value)||void 0===t?void 0:t.label)}(e,"Range"===c.name?r:null):"-"),m.a.createElement("td",{className:"text-center on-mobile-hide"},"Range"===c.name?"".concat((null===r||void 0===r?void 0:r.range_from)?r.range_from:"NA"," - ").concat((null===r||void 0===r?void 0:r.range_to)?r.range_to:"NA"," ").concat((null===l||void 0===l?void 0:l.name)?l.name:""):"")))})):m.a.createElement("tbody",null,m.a.createElement("tr",{className:e.abnormal?"is-abnormal":""},m.a.createElement("td",null,m.a.createElement("p",{className:"sub-test-name"},r),m.a.createElement("p",{className:"on-mobile-show default-range"},"Range"===(null===o||void 0===o?void 0:o.name)?"Normal Range: ".concat((null===g||void 0===g?void 0:g.range_from)?g.range_from:"NA"," - ").concat((null===g||void 0===g?void 0:g.range_to)?g.range_to:"NA"," ").concat((null===E||void 0===E?void 0:E.name)?E.name:""):"")),m.a.createElement("td",{className:"test-result ".concat("Range"===(null===o||void 0===o?void 0:o.name)?"range-test-result":"")},(null===o||void 0===o?void 0:o.format.presentation.result)?"string"===typeof e.value?e.value:null===(t=e.value)||void 0===t?void 0:t.label:"-"),m.a.createElement("td",{className:"text-center on-mobile-hide"},"Range"===(null===o||void 0===o?void 0:o.name)?"".concat((null===g||void 0===g?void 0:g.range_from)?g.range_from:"NA"," - ").concat((null===g||void 0===g?void 0:g.range_to)?g.range_to:"NA"," ").concat((null===E||void 0===E?void 0:E.name)?E.name:""):"")))),i&&m.a.createElement(p.a,{label:"Interpretation",value:Object(h.a)(i),className:"editor-content"}),u&&m.a.createElement(p.a,{label:"Method",value:Object(h.a)(u),className:"editor-content"}),d&&m.a.createElement(p.a,{label:"Technique",value:Object(h.a)(d),className:"editor-content"}),v&&m.a.createElement(p.a,{label:"Note",value:Object(h.a)(v),className:"editor-content"}),l&&m.a.createElement(p.a,{label:"Remark",value:Object(h.a)(l),className:"editor-content"}),w&&m.a.createElement(p.a,{label:"Lab Remarks",value:w}))}}))}),[C,S]),V=Object(i.useCallback)(Object(o.a)(c.a.mark((function a(){var t,n,l,r,o,s;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(g.fetchRequest)({url:"/patient/".concat(e.selectedRole.uuid,"/reports/").concat(P,"/download_receipt\n    "),method:"GET",isAuth:!0});case 2:if(!(t=a.sent)||200!==t.status){a.next=15;break}return a.next=6,t.blob();case 6:return n=a.sent,l=new Blob([n],{type:"application/pdf"}),r=URL.createObjectURL(l),o=document.createElement("a"),s="".concat((null===F||void 0===F?void 0:F.full_name)||"patient","_bill.pdf"),o.href=r,o.download=s,o.click(),a.abrupt("return",n);case 15:case"end":return a.stop()}}),a)}))),[P,e,F]),W=F||{},X=W.full_name,Y=void 0===X?"":X,$=W.gender,ee=void 0===$?"":$,ae=W.age,te=void 0===ae?"":ae;return m.a.createElement("div",{className:"report-wrapper pt-3 d-flex flex-column"},m.a.createElement("div",{className:"view-report-top"},m.a.createElement("div",{className:"d-flex mHide"},m.a.createElement("div",{className:"d-flex justify-content-between w-100 p-3"},m.a.createElement(p.a,{label:"Patient Name",value:Y}),m.a.createElement(p.a,{label:"Age / Sex",value:"".concat(te,"/").concat(ee)}),m.a.createElement(p.a,{label:"Referred Doctor",value:(null===Z||void 0===Z?void 0:Z.full_name)||"Self"}),m.a.createElement(p.a,{label:"Date",value:z}))),m.a.createElement("div",{className:"content mb-4 p-4"},m.a.createElement(v.a,{cardClass:"mb-3",className:"test-result-acc",testAccordion:!0,data:Q}))),m.a.createElement("div",{className:"view-report-bottom justify-content-center align-items-center py-2 px-3 footer padRmM"},m.a.createElement("div",{className:"d-flex justify-content-between align-items-center w-100 viewReport"},m.a.createElement("div",{className:"select_all"},m.a.createElement(f.a,{name:"select-all",label:D?"Unselect All":"Select All",checked:D,blue:!0,onClick:function(){var e=[];!D&&C.map((function(a){var t=a.test_id;return e.push(t)})),T(e),M(!D)},disabled:C.some((function(e){return!e.report_sent}))})),m.a.createElement("div",{className:"actions p-2"},m.a.createElement(b.ContainedButton,{onClick:V,darkBlue:!0,className:"mr-2 download-bill-btn"},m.a.createElement("div",{className:"d-flex align-items-center"},m.a.createElement("p",{className:"mr-2"},u.y),m.a.createElement("p",{className:"pt-1"},"Download Bill"))),m.a.createElement(b.ContainedButton,{onClick:function(){C.map(function(){var e=Object(o.a)(c.a.mark((function e(a){var t,n,l,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S.some((function(e){return e===a.test_id}))){e.next=15;break}if(!a.report_url){e.next=15;break}return e.next=4,Object(g.fetchRequest)({url:a.report_url,method:"GET",isAuth:!0,withBaseUrl:"true"});case 4:if(!(t=e.sent)||200!==t.status){e.next=15;break}return e.next=8,t.blob();case 8:return n=e.sent,l=new Blob([n],{type:"application/pdf"}),r=URL.createObjectURL(l),document.createElement("a"),"".concat(a.name,".pdf"),window.open(r,"_blank"),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())},disabled:!S.length,black:!0,className:"download-report-btn"},m.a.createElement("div",{className:"d-flex align-items-center"},m.a.createElement("p",{className:"mr-2"},u.y),m.a.createElement("p",{className:"pt-1"},"Download Report")))))))}},347:function(e,a,t){"use strict";var n=t(0),l=t.n(n),c=t(10),r="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed doeiusmod tempor incididunt ut labore et dolore?",o="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore.";a.a=function(e){var a=e.data,t=void 0===a?[]:a,n=e.testAccordion,s=e.className,i=e.cardClass;return l.a.createElement("div",{className:"".concat(n?"test-accordion":"accordion"," ").concat(s||""),id:"accordionExample"},t.map((function(e,a){return l.a.createElement("div",{className:"card ".concat(i||""),key:a},l.a.createElement("div",{className:"card-header",id:"headingOne"},l.a.createElement("h2",{className:"mb-0 d-flex align-items-center accordion-content ".concat(e.className?e.className:"")},e&&e.renderCheckBox,l.a.createElement(c.TextButton,{className:"acc-btn d-flex align-items-center collapse-btn collapsed justify-content-between",dataToggle:"collapse",dataTarget:"#collapse-".concat(a),ariaExpanded:"true",ariaControls:"collapse-".concat(a),disabled:null===e||void 0===e?void 0:e.disable},e&&e.heading||r,l.a.createElement("p",{className:"down-arrow"},l.a.createElement("svg",{width:"18",height:"18",viewBox:"0 0 9 15",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("path",{d:"M0.371183 0.372785C-0.123728 0.867695 -0.123728 1.66717 0.371183 2.16208L5.29491 7.0858L0.371183 12.0095C-0.123728 12.5044 -0.123728 13.3039 0.371183 13.7988C0.866093 14.2937 1.66556 14.2937 2.16047 13.7988L7.98519 7.9741C8.4801 7.47919 8.4801 6.67972 7.98519 6.18481L2.16047 0.360095C1.67825 -0.122126 0.866093 -0.122126 0.371183 0.372785Z",fill:"#828282"})))))),l.a.createElement("div",{id:"collapse-".concat(a),className:"collapse","aria-labelledby":"headingOne","data-parent":"#accordionExample"},l.a.createElement("div",{className:"card-body"},e&&e.body||o)))})))}},547:function(e,a,t){"use strict";var n=t(0),l=t.n(n);a.a=function(e){var a=e.className,t=e.label,n=e.value,c=e.children;return l.a.createElement("div",{className:"details ".concat(a||"")},l.a.createElement("label",{className:"label mr-2"},"".concat(t," : ")),n&&l.a.createElement("label",{className:"value"},n||"-"),c||"")}}}]);
//# sourceMappingURL=62.c8aa1a7b.chunk.js.map